

## Checagem de dados

```{r, eval=FALSE, include=FALSE}
# Em nosso caso, devemos verificar:
  
#   + existência de valores vazios; em caso positivo, devemos eliminá-los;
# + confiabilidade dos valores de latitude e longitude, às vezes, por diversos fatores, há troca de sinais (negativos e positivos) ocasionando equívocos quanto à ocorrência exata da amostra. Se for percebido algo assim, é bom checar os dados e buscar corrigí-los.

# une os dados e passa para a proxima acao
dad <- 
  rbind(aracouch,heptaphy) %>%
  #elimina os registros vazios de coletor
  filter(recordedBy != '') %>%
  #elimina os registros sem lat ou long
  filter(decimalLatitude != '' | decimalLongitude != '') %>%
  #filtra apenas os especimes identificados pelo especialista da família Burseraceae
  filter(identifiedBy == 'D. C. Daly')

#ha registros duplicados
#busca-se entao apenas os dados unicos
#limpa os dados de coletor e numero para poder criar um identificador
#limpeza consiste em eliminar '.', espacos vazios, apostrofe e '_' duplos
dad$recordedBy <-
  gsub('\\.', '_', dad$recordedBy) %>%
  gsub(' ', '_', .) %>%
  gsub("'", '_', .) %>%
  gsub('__', '_', .)

#faz-se o mesmo para os numeros de coleta
dad$recordNumber <- 
  gsub('/','_', dad$recordNumber) %>%
  gsub(' ', '_', .) %>%
  gsub('\\.', '_', .)

#cria o identificador de coleta e especie
dados <- dad %>%
  mutate( ID = paste(recordedBy,recordNumber, sep = '_'), Species = paste('Protium', specificEpithet, sep = ' '))
dados$ID <- gsub('__','_',dados$ID)


#quem sao os dados unicos
unicos <- unique(dados$ID)

#agora filtra os dados unicos no dataframe, eliminando os duplicados
#faz-se uso da funcao match para obter esse resultado
prot <- 
  match(unicos, dados$ID) %>%
  dados[.,]
#verifica a cobertura de lat e long para ver se estao dentro
# dos limites da America do Sul
lat <- range(prot$decimalLatitude)
long <- range(prot$decimalLongitude) #aqui tem algo estranho
#percebe-se aqui que ha valores que caem fora da Am Sul
#limite e pouco mais de -80
head(sort(prot$decimalLongitude))
#devemos eliminar
protium <-
  prot %>%
  filter(decimalLongitude > -80)

```

